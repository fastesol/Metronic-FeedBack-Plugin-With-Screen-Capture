(function(f,b,h){var g={};g.logging=false;function e(i){if(g.logging&&f.console&&f.console.log){f.console.log(i)}}g.log=e;g.Util={};g.Util.backgroundImage=function(i){if(/data:image\/.*;base64,/i.test(i)||/^(-webkit|-moz|linear-gradient|-o-)/.test(i)){return i}if(i.toLowerCase().substr(0,5)==='url("'){i=i.substr(5);i=i.substr(0,i.length-2)}else{i=i.substr(4);i=i.substr(0,i.length-1)}return i};g.Util.Bounds=function d(i){var k,j={};if(i.getBoundingClientRect){k=i.getBoundingClientRect();j.top=k.top;j.bottom=k.bottom||(k.top+k.height);j.left=k.left;j.width=k.width||(k.right-k.left);j.height=k.height||(k.bottom-k.top);return j}};g.Util.getCSS=function(i,j){return $(i).css(j)};g.Util.Extend=function(i,k){var j;for(j in i){if(i.hasOwnProperty(j)){k[j]=i[j]}}return k};g.Util.Children=function(k){var j;try{j=$(k).contents()}catch(i){e("html2canvas.Util.Children failed with exception: "+i.message);j=[]}return j};g.Generate={};g.Generate.Gradient=function(q,o){var n=b.createElement("canvas"),u=n.getContext("2d"),z,m=0,l=0,k=0,j=0,w=[],B,v,x,s,A,t,C;n.width=o.width;n.height=o.height;function r(p){var D=-1,i="",E;while(D++<p.length){E=p.charAt(D);if(E===")"){i+=E;w.push(i);i="";while(D++<p.length&&p.charAt(D)!==","){}}else{i+=E}}}if(z=q.match(/-webkit-linear-gradient\((.*)\)/)){B=z[1].split(",",1)[0];r(z[1].substr(B.length+2));B=B.split(" ");for(t=0;t<B.length;t+=1){switch(B[t]){case"top":j=o.height;break;case"right":m=o.width;break;case"bottom":l=o.height;break;case"left":k=o.width;break}}}else{if(z=q.match(/-webkit-gradient\(linear, (\d+)[%]{0,1} (\d+)[%]{0,1}, (\d+)[%]{0,1} (\d+)[%]{0,1}, from\((.*)\), to\((.*)\)\)/)){m=(z[1]*o.width)/100;l=(z[2]*o.height)/100;k=(z[3]*o.width)/100;j=(z[4]*o.height)/100;w.push(z[5]);w.push(z[6])}else{if(z=q.match(/-moz-linear-gradient\((\d+)[%]{0,1} (\d+)[%]{0,1}, (.*)\)/)){m=(z[1]*o.width)/100;l=(z[2]*o.width)/100;k=o.width-m;j=o.height-l;r(z[3])}else{return}}}s=u.createLinearGradient(m,l,k,j);A=1/(w.length-1);for(v=0,x=w.length;v<x;v+=1){try{s.addColorStop(A*v,w[v])}catch(y){e(["failed to add color stop: ",y,"; tried to add: ",w[v],"; stop: ",v,"; in: ",q])}}u.fillStyle=s;u.fillRect(0,0,o.width,o.height);C=new Image();C.src=n.toDataURL();return C};g.Generate.ListAlpha=function(k){var j="",i;do{i=k%26;j=String.fromCharCode((i)+64)+j;k=k/26}while((k*26)>26);return j};g.Generate.ListRoman=function(m){var l=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],j=[1000,900,500,400,100,90,50,40,10,9,5,4,1],n="",k,i=l.length;if(m<=0||m>=4000){return m}for(k=0;k<i;k+=1){while(m>=j[k]){m-=j[k];n+=l[k]}}return n};g.Parse=function(y,k,K){f.scroll(0,0);K=K||{};if(y===h){y=b.body}var T={rangeBounds:false},J={iframeDefault:"default",ignoreElements:"IFRAME|OBJECT|PARAM|OVERLAY|modal-backdrop",useOverflow:true,letterRendering:false},Y=false,l=0,n={},s=y.ownerDocument,P=new RegExp("("+J.ignoreElements+")"),G=s.body,V,ab,v,O,I,D,M,X,z,R;J=g.Util.Extend(K,J);k=k||{};if(s.createRange){V=s.createRange();if(V.getBoundingClientRect){ab=s.createElement("boundtest");ab.style.height="123px";ab.style.display="block";G.appendChild(ab);V.selectNode(ab);v=V.getBoundingClientRect();O=v.height;if(O===123){T.rangeBounds=true}G.removeChild(ab)}}function F(){if(K.width&&K.height){return{width:K.width,height:K.height}}return{width:Math.max(Math.max(s.body.scrollWidth,s.documentElement.scrollWidth),Math.max(s.body.offsetWidth,s.documentElement.offsetWidth),Math.max(s.body.clientWidth,s.documentElement.clientWidth)),height:Math.max(Math.max(s.body.scrollHeight,s.documentElement.scrollHeight),Math.max(s.body.offsetHeight,s.documentElement.offsetHeight),Math.max(s.body.clientHeight,s.documentElement.clientHeight))}}var C=g.Util.getCSS;function E(i,r){var ae=parseInt(C(i,r),10);return(isNaN(ae))?0:ae}function aa(af,i,ah,ae,ag,r){if(r!=="transparent"){af.setVariable("fillStyle",r);af.fillRect(i,ah,ae,ag);l+=1}}function q(r,i){switch(i){case"lowercase":return r.toLowerCase();case"capitalize":return r.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(ae,ag,af){if(ae.length>0){return ag+af.toUpperCase()}});case"uppercase":return r.toUpperCase();default:return r}}function p(i){return i.replace(/^\s*/g,"").replace(/\s*$/g,"")}function u(ae,ai){if(n[ae+"-"+ai]!==h){return n[ae+"-"+ai]}var i=s.createElement("div"),r=s.createElement("img"),ag=s.createElement("span"),ah,af,aj;i.style.visibility="hidden";i.style.fontFamily=ae;i.style.fontSize=ai;i.style.margin=0;i.style.padding=0;G.appendChild(i);r.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";r.width=1;r.height=1;r.style.margin=0;r.style.padding=0;r.style.verticalAlign="baseline";ag.style.fontFamily=ae;ag.style.fontSize=ai;ag.style.margin=0;ag.style.padding=0;ag.appendChild(s.createTextNode("Hidden Text"));i.appendChild(ag);i.appendChild(r);ah=(r.offsetTop-ag.offsetTop)+1;i.removeChild(ag);i.appendChild(s.createTextNode("Hidden Text"));i.style.lineHeight="normal";r.style.verticalAlign="super";af=(r.offsetTop-i.offsetTop)+1;aj={baseline:ah,lineWidth:1,middle:af};n[ae+"-"+ai]=aj;G.removeChild(i);return aj}function j(ae,i,af,r){if(p(ae).length>0){r.fillText(ae,i,af);l+=1}}function Z(r,au,aj){var aw=aj.ctx,aA=C(r,"fontFamily"),ar=C(r,"fontSize"),ay=C(r,"color"),aD=C(r,"textDecoration"),ah=C(r,"textAlign"),i=C(r,"letterSpacing"),ak,ap,ax,an,at=C(r,"fontWeight"),am=C(r,"fontStyle"),aC=C(r,"fontVariant"),az=false,ai,af,av=0,ag,aB,aq,al,ae,ao;au.nodeValue=q(au.nodeValue,C(r,"textTransform"));ap=p(au.nodeValue);if(ap.length>0){if(aD!=="none"){ax=u(aA,ar)}ah=ah.replace(["-webkit-auto"],["auto"]);if(J.letterRendering===false&&/^(left|right|justify|auto)$/.test(ah)&&/^(normal|none)$/.test(i)){an=au.nodeValue.split(/(\b| )/)}else{an=au.nodeValue.split("")}switch(parseInt(at,10)){case 401:at="bold";break;case 400:at="normal";break}aw.setVariable("fillStyle",ay);aw.setVariable("font",am+" "+aC+" "+at+" "+ar+" "+aA);if(az){aw.setVariable("textAlign","right")}else{aw.setVariable("textAlign","left")}ag=au;for(aB=0;aB<an.length;aB+=1){af=null;if(T.rangeBounds){if(aD!=="none"||p(an[aB]).length!==0){af=an[aB];if(s.createRange){aq=s.createRange();aq.setStart(au,av);aq.setEnd(au,av+af.length)}else{aq=G.createTextRange()}if(aq.getBoundingClientRect()){ak=aq.getBoundingClientRect()}else{ak={}}}}else{if(typeof ag.nodeValue!=="string"){continue}ai=ag.splitText(an[aB].length);al=ag.parentNode;ae=s.createElement("wrapper");ao=ag.cloneNode(true);ae.appendChild(ag.cloneNode(true));al.replaceChild(ae,ag);ak=g.Util.Bounds(ae);af=ag.nodeValue;ag=ai;al.replaceChild(ao,ae)}if(af!==null){j(af,ak.left,ak.bottom,aw)}switch(aD){case"underline":aa(aw,ak.left,Math.round(ak.top+ax.baseline+ax.lineWidth),ak.width,1,ay);break;case"overline":aa(aw,ak.left,ak.top,ak.width,1,ay);break;case"line-through":aa(aw,ak.left,Math.ceil(ak.top+ax.middle+ax.lineWidth),ak.width,1,ay);break}av+=an[aB].length}}}function L(i,ag){var af=s.createElement("boundelement"),r,ae;af.style.display="inline";r=i.style.listStyleType;i.style.listStyleType="none";af.appendChild(s.createTextNode(ag));i.insertBefore(af,i.firstChild);ae=g.Util.Bounds(af);i.removeChild(af);i.style.listStyleType=r;return ae}function Q(r,ak,af){var ae=C(r,"listStylePosition"),al,aj,ai=C(r,"listStyleType"),ag,am,i,ah=C(r,"fontWeight");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(ai)){ag=$(r).index()+1;switch(ai){case"decimal":am=ag;break;case"decimal-leading-zero":if(ag.toString().length===1){am=ag="0"+ag.toString()}else{am=ag.toString()}break;case"upper-roman":am=g.Generate.ListRoman(ag);break;case"lower-roman":am=g.Generate.ListRoman(ag).toLowerCase();break;case"lower-alpha":am=g.Generate.ListAlpha(ag).toLowerCase();break;case"upper-alpha":am=g.Generate.ListAlpha(ag);break}am+=". ";i=L(r,am);switch(ah){case 401:ah="bold";break;case 400:ah="normal";break}D.setVariable("fillStyle",C(r,"color"));D.setVariable("font",C(r,"fontVariant")+" "+ah+" "+C(r,"fontStyle")+" "+C(r,"fontSize")+" "+C(r,"fontFamily"));if(ae==="inside"){D.setVariable("textAlign","left");al=af.left}else{return;D.setVariable("textAlign","right");al=af.left-10}aj=i.bottom;j(am,al,aj,D)}}function B(r){var i=k[r];if(i&&i.succeeded===true){return i.img}else{return false}}function t(af,ah){var i=Math.max(af.left,ah.left),ag=Math.max(af.top,ah.top),r=Math.min((af.left+af.width),(ah.left+ah.width)),ae=Math.min((af.top+af.height),(ah.top+ah.height));return{left:i,top:ag,width:r-i,height:ae-ag}}function S(ae,i){if(!i){this.zStack=a(0);return this.zStack}if(ae!=="auto"){Y=true;var r=a(ae);i.children.push(r);return r}return i}function x(ae,ar,r,af){var ao=r.left,an=r.top,aq=r.width,ah=r.height,i,ap,al,aj,am,ag,ak,ai=(function(au){var aw=[],av=["Top","Right","Bottom","Left"],at;for(at=0;at<4;at+=1){aw.push({width:E(au,"border"+av[at]+"Width"),color:C(au,"border"+av[at]+"Color")})}return aw}(ae));for(i=0;i<4;i+=1){ap=ai[i];if(ap.width>0){al=ao;aj=an;am=aq;ag=ah-(ai[2].width);switch(i){case 0:ag=ai[0].width;break;case 1:al=ao+aq-(ai[1].width);am=ai[1].width;break;case 2:aj=(aj+ah)-(ai[2].width);ag=ai[2].width;break;case 3:am=ai[3].width;break}ak={left:al,top:aj,width:am,height:ag};if(af){ak=t(ak,af)}if(ak.width>0&&ak.height>0){aa(ar,al,aj,ak.width,ak.height,ap.color)}}}return ai}function U(af,r,al){var am=s.createElement("valuewrap"),an=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"],ai,ah,ag,ak,ae;for(ai=0,ak=an.length;ai<ak;ai+=1){ae=an[ai];try{am.style[ae]=C(af,ae)}catch(aj){e("html2canvas: Parse: Exception caught in renderFormValue: "+aj.message)}}am.style.borderColor="black";am.style.borderStyle="solid";am.style.display="block";am.style.position="absolute";if(/^(submit|reset|button|text|password)$/.test(af.type)||af.nodeName==="SELECT"){am.style.lineHeight=C(af,"height")}am.style.top=r.top+"px";am.style.left=r.left+"px";if(af.nodeName==="SELECT"){ah=af.options[af.selectedIndex].text}else{ah=af.value}ag=s.createTextNode(ah);am.appendChild(ag);G.appendChild(am);Z(af,ag,al);G.removeChild(am)}function ad(ae,af,ah){var aj=(function(ak){if(ak!==h){return(ak.split(",")[0]||"0 0").split(" ")}else{return[C(ae,"backgroundPositionX"),C(ae,"backgroundPositionY")]}})(C(ae,"backgroundPosition")),r,ag,i,ai;if(aj.length===1){ai=aj;aj=[];aj[0]=ai;aj[1]=ai}if(aj[0].toString().indexOf("%")!==-1){i=(parseFloat(aj[0])/100);ag=((af.width*i)-(ah.width*i))}else{ag=parseInt(aj[0],10)}if(aj[1].toString().indexOf("%")!==-1){i=(parseFloat(aj[1])/100);r=((af.height*i)-(ah.height*i))}else{r=parseInt(aj[1],10)}return{top:r,left:ag}}function A(aj,r,ah,ag,ai,ae,al,ak,i,af){aj.drawImage(r,ah,ag,ai,ae,al,ak,i,af);l+=1}function N(al,ah,aj,ai,r,ak,af,i){var ag=0,ae=0;if(af-aj>0){ag=af-aj}if(i-ai>0){ae=i-ai}A(al,ah,ag,ae,r-ag,ak-ae,aj+ag,ai+ae,r-ag,ak-ae)}function m(al,ae,ag,ai,ah,aj,af){var ak,i=Math.min(ae.width,aj),r;ag.top=ag.top-Math.ceil(ag.top/ae.height)*ae.height;for(r=(ah+ag.top);r<af+ah;){if(Math.floor(r+ae.height)>af+ah){ak=(af+ah)-r}else{ak=ae.height}N(al,ae,ai+ag.left,r,i,ak,ai,ah);r=Math.floor(r+ae.height)}}function o(al,ae,ag,ai,ah,aj,af){var ak=Math.min(ae.height,af),i,r;ag.left=ag.left-Math.ceil(ag.left/ae.width)*ae.width;for(r=(ai+ag.left);r<aj+ai;){if(Math.floor(r+ae.width)>aj+ai){i=(aj+ai)-r}else{i=ae.width}N(al,ae,r,(ah+ag.top),i,ak,ai,ah);r=Math.floor(r+ae.width)}}function ac(r,i,at){var ai=C(r,"backgroundImage"),ao=C(r,"backgroundRepeat").split(",")[0],ag,al,ae,af,ak,aj,an,am,ar,ah,ap,aq;if(!/data:image\/.*;base64,/i.test(ai)&&!/^(-webkit|-moz|linear-gradient|-o-)/.test(ai)){ai=ai.split(",")[0]}if(typeof ai!=="undefined"&&/^(1|none)$/.test(ai)===false){ai=g.Util.backgroundImage(ai);ag=B(ai);al=ad(r,i,ag);if(ag){switch(ao){case"repeat-x":o(at,ag,al,i.left,i.top,i.width,i.height);break;case"repeat-y":m(at,ag,al,i.left,i.top,i.width,i.height);break;case"no-repeat":af=i.width-al.left;ar=i.height-al.top;ak=al.left;aj=al.top;an=al.left+i.left;am=al.top+i.top;if(ak<0){ak=Math.abs(ak);an+=ak;af=Math.min(i.width,ag.width-ak)}else{af=Math.min(af,ag.width);ak=0}if(aj<0){aj=Math.abs(aj);am+=aj;ar=Math.min(i.height,ag.height-aj)}else{ar=Math.min(ar,ag.height);aj=0}if(ar>0&&af>0){A(at,ag,ak,aj,af,ar,an,am,af,ar)}break;default:al.top=al.top-Math.ceil(al.top/ag.height)*ag.height;for(ae=(i.top+al.top);ae<i.height+i.top;){ah=Math.min(ag.height,(i.height+i.top)-ae);if(Math.floor(ae+ag.height)>ah+ae){ap=(ah+ae)-ae}else{ap=ag.height}if(ae<i.top){aq=i.top-ae;ae=i.top}else{aq=0}o(at,ag,al,i.left,ae,i.width,ap);if(aq>0){al.top+=aq}ae=Math.floor(ae+ag.height)-aq}break}}else{e("html2canvas: Error loading background:"+ai)}}}function W(i){if(K.repositionat){i.bottom=i.bottom+K.repositionat.top;i.top=i.top-K.repositionat.top;i.left=i.left-K.repositionat.left}}function w(af,ag){var al=g.Util.Bounds(af);W(al);var ap=al.left,ao=al.top,ar=al.width,aw=al.height,at,r=C(af,"backgroundColor"),aq=C(af,"position"),an,ah=C(af,"opacity"),ak,aj,ai,av,au,ae,ay,ax,i,am;if(!ag){M=F();ag={opacity:1}}else{M={}}an=S(C(af,"zIndex"),ag.zIndex);ak={ctx:c(M.width||ar,M.height||aw),zIndex:an,opacity:ah*ag.opacity,cssPosition:aq};if(ag.clip){ak.clip=g.Util.Extend({},ag.clip)}if(J.useOverflow===true&&/(hidden|scroll|auto)/.test(C(af,"overflow"))===true&&/(BODY)/i.test(af.nodeName)===false){if(ak.clip){ak.clip=t(ak.clip,al)}else{ak.clip=al}}aj=an.children.push(ak);av=an.children[aj-1].ctx;av.setVariable("globalAlpha",ak.opacity);ai=x(af,av,al,false);ak.borders=ai;if((P.test(af.nodeName)&&J.iframeDefault!=="transparent")){if(J.iframeDefault==="default"){r="#efefef"}else{r=J.iframeDefault}}au={left:ap+ai[3].width,top:ao+ai[0].width,width:ar-(ai[1].width+ai[3].width),height:aw-(ai[0].width+ai[2].width)};if(ak.clip){au=t(au,ak.clip)}if(au.height>0&&au.width>0){aa(av,au.left,au.top,au.width,au.height,r);ac(af,au,av)}switch(af.nodeName){case"IMG":ae=af.getAttribute("src");at=B(ae);if(at){ay=E(af,"paddingLeft");ax=E(af,"paddingTop");i=E(af,"paddingRight");am=E(af,"paddingBottom");A(av,at,0,0,at.width,at.height,ap+ay+ai[3].width,ao+ax+ai[0].width,al.width-(ai[1].width+ai[3].width+ay+i),al.height-(ai[0].width+ai[2].width+ax+am))}else{e("html2canvas: Error loading <img>:"+ae)}break;case"INPUT":if(/^(text|url|email|submit|button|reset)$/.test(af.type)&&af.value.length>0){U(af,al,ak)}break;case"TEXTAREA":if(af.value.length>0){U(af,al,ak)}break;case"SELECT":if(af.options.length>0){U(af,al,ak)}break;case"LI":Q(af,ak,au);break;case"CANVAS":ay=E(af,"paddingLeft");ax=E(af,"paddingTop");i=E(af,"paddingRight");am=E(af,"paddingBottom");A(av,af,0,0,af.width,af.height,ap+ay+ai[3].width,ao+ax+ai[0].width,al.width-(ai[1].width+ai[3].width+ay+i),al.height-(ai[0].width+ai[2].width+ax+am));break}return an.children[aj-1]}function H(af,r){if(C(af,"display")!=="none"&&C(af,"visibility")!=="hidden"&&!P.test(af.getAttribute("class"))&&!P.test(af.getAttribute("id"))){r=w(af,r)||r;D=r.ctx;if(!P.test(af.nodeName)){var ai=g.Util.Children(af),ae,ag,ah;for(ae=0,ah=ai.length;ae<ah;ae+=1){ag=ai[ae];if(ag.nodeType===1){H(ag,r)}else{if(ag.nodeType===3){Z(af,ag,r)}}}}}}I=w(y,null);for(X=0,z=y.children,R=z.length;X<R;X+=1){H(z[X],I)}I.backgroundColor=C(G,"backgroundColor");return I};function a(i){return{zindex:i,children:[]}}g.Preload=function(j,u){var k={proxy:"http://html2canvas.appspot.com/",timeout:0,useCORS:false,allowTaint:false},s={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:false},z,A,y,n=0,C=j.ownerDocument,r=C.images,t=r.length,o=C.createElement("a"),q=(function(i){return(i.crossOrigin!==h)})(new Image()),w;o.href=f.location.href;z=o.protocol+o.host;u=u||{};k=g.Util.Extend(u,k);j=j||C.body;function B(D){o.href=D;o.href=o.href;var i=o.protocol+o.host;return(i===z)}function l(){e("html2canvas: start: images: "+s.numLoaded+" / "+s.numTotal+" (failed: "+s.numFailed+")");if(!s.firstRun&&s.numLoaded>=s.numTotal){if(typeof k.complete==="function"){k.complete(s)}e("Finished loading images: # "+s.numTotal+" (failed: "+s.numFailed+")")}}function v(F,E,G){var i,H=k.proxy,D;o.href=F;F=o.href;i="html2canvas_"+(n++);G.callbackname=i;if(H.indexOf("?")>-1){H+="&"}else{H+="?"}H+="url="+encodeURIComponent(F)+"&callback="+i;D=C.createElement("script");f[i]=function(I){if(I.substring(0,6)==="error:"){G.succeeded=false;s.numLoaded++;s.numFailed++;l()}else{x(E,G);E.src=I}f[i]=h;try{delete f[i]}catch(J){}D.parentNode.removeChild(D);D=null;delete G.script;delete G.callbackname};D.setAttribute("type","text/javascript");D.setAttribute("src",H);G.script=D;f.document.body.appendChild(D)}function p(E){var F=g.Util.Children(E),H,J=F.length,K,D,I,G=false;for(H=0;H<J;H+=1){p(F[H])}try{G=E.nodeType}catch(M){G=false;e("html2canvas: failed to access some element's nodeType - Exception: "+M.message)}if(G===1||G===h){try{K=g.Util.getCSS(E,"backgroundImage")}catch(L){e("html2canvas: failed to get background-image - Exception: "+L.message)}if(K&&K!=="1"&&K!=="none"){if(K.substring(0,7)==="-webkit"||K.substring(0,3)==="-o-"||K.substring(0,4)==="-moz"){I=g.Generate.Gradient(K,g.Util.Bounds(E));if(I!==h){s[K]={img:I,succeeded:true};s.numTotal++;s.numLoaded++;l()}}else{D=g.Util.backgroundImage(K.match(/data:image\/.*;base64,/i)?K:K.split(",")[0]);A.loadImage(D)}}}}function x(i,D){i.onload=function(){if(D.timer!==h){f.clearTimeout(D.timer)}s.numLoaded++;D.succeeded=true;l()};i.onerror=function(){if(i.crossOrigin==="anonymous"){f.clearTimeout(D.timer);if(k.proxy){var E=i.src;i=new Image();D.img=i;i.src=E;v(i.src,i,D);return}}s.numLoaded++;s.numFailed++;D.succeeded=false;l()}}function m(){if(!this.img.complete){this.timer=f.setTimeout(this.img.customComplete,100)}else{this.img.onerror()}}A={loadImage:function(E){var i,D;if(E&&s[E]===h){i=new Image();if(E.match(/data:image\/.*;base64,/i)){i.src=E.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,"");D=s[E]={img:i};s.numTotal++;x(i,D)}else{if(B(E)||k.allowTaint===true){D=s[E]={img:i};s.numTotal++;x(i,D);i.src=E}else{if(q&&!k.allowTaint&&k.useCORS){i.crossOrigin="anonymous";D=s[E]={img:i};s.numTotal++;x(i,D);i.src=E;i.customComplete=m.bind(D);i.customComplete()}else{if(k.proxy){D=s[E]={img:i};s.numTotal++;v(E,i,D)}}}}}},cleanupDOM:function(E){var i,F;if(!s.cleanupDone){if(E&&typeof E==="string"){e("html2canvas: Cleanup because: "+E)}else{e("html2canvas: Cleanup after timeout: "+k.timeout+" ms.")}for(F in s){if(s.hasOwnProperty(F)){i=s[F];if(typeof i==="object"&&i.callbackname&&i.succeeded===h){f[i.callbackname]=h;try{delete f[i.callbackname]}catch(D){}if(i.script&&i.script.parentNode){i.script.setAttribute("src","about:blank");i.script.parentNode.removeChild(i.script)}s.numLoaded++;s.numFailed++;e("html2canvas: Cleaned up failed img: '"+F+"' Steps: "+s.numLoaded+" / "+s.numTotal)}}}if(f.stop!==h){f.stop()}else{if(b.execCommand!==h){b.execCommand("Stop",false)}}if(b.close!==h){b.close()}s.cleanupDone=true;if(!(E&&typeof E==="string")){l()}}},renderingDone:function(){if(w){f.clearTimeout(w)}}};if(k.timeout>0){w=f.setTimeout(A.cleanupDOM,k.timeout)}e("html2canvas: Preload starts: finding background-images");s.firstRun=true;if(typeof k.beforeStart==="function"){k.beforeStart()}p(j);e("html2canvas: Preload: Finding images");if(typeof k.beforeLoadingImage==="function"){k.beforeLoadingImage(t)}for(y=0;y<t;y+=1){A.loadImage(r[y].getAttribute("src"));if(typeof k.loadNextImage==="function"){k.loadNextImage(t/(y+1))}}s.firstRun=false;e("html2canvas: Preload: Done.");if(typeof k.beforeConvert==="function"){k.beforeConvert(t)}if(s.numTotal===s.numLoaded){l()}return A};function c(j,i){var k=[];return{storage:k,width:j,height:i,fillRect:function(){k.push({type:"function",name:"fillRect","arguments":arguments})},drawImage:function(){k.push({type:"function",name:"drawImage","arguments":arguments})},fillText:function(){k.push({type:"function",name:"fillText","arguments":arguments})},setVariable:function(l,m){k.push({type:"variable",name:l,"arguments":m})}}}g.Renderer=function(j,i){var t={width:null,height:null,renderer:"canvas",taintTest:true},o=[],k,m=false,l=2880,r=b;t=g.Util.Extend(i,t);function p(B){var v=[],C=[],D=B.children,E,y,u,F,A,x,z,w;for(E=0,A=D.length;E<A;E+=1){x=D[E];if(x.children&&x.children.length>0){v.push(x);C.push(x.zindex)}else{o.push(x)}}C.sort(function(H,G){return H-G});for(y=0,u=C.length;y<u;y+=1){F=C[y];for(z=0,w=v.length;z<=w;z+=1){if(v[z].zindex===F){x=v.splice(z,1);p(x[0]);break}}}}function s(H){p(H.zIndex);var I=k.getContext("2d"),D,A,v,F,w,u,G=b.createElement("canvas"),J=(G.getContext!==h),z,y,E=(J)?G.getContext("2d"):{},B=[],x;k.width=k.style.width=(!m)?t.width||H.ctx.width:Math.min(l,(t.width||H.ctx.width));k.height=k.style.height=(!m)?t.height||H.ctx.height:Math.min(l,(t.height||H.ctx.height));x=I.fillStyle;I.fillStyle=H.backgroundColor;I.fillRect(0,0,k.width,k.height);I.fillStyle=x;for(A=0,v=o.length;A<v;A+=1){D=o.splice(0,1)[0];D.canvasPosition=D.canvasPosition||{};I.textBaseline="bottom";if(D.clip){I.save();I.beginPath();I.rect(D.clip.left,D.clip.top,D.clip.width,D.clip.height);I.clip()}if(D.ctx.storage){for(F=0,z=D.ctx.storage.length;F<z;F+=1){y=D.ctx.storage[F];switch(y.type){case"variable":I[y.name]=y["arguments"];break;case"function":if(y.name==="fillRect"){if(!m||y["arguments"][0]+y["arguments"][2]<l&&y["arguments"][1]+y["arguments"][3]<l){I.fillRect.apply(I,y["arguments"])}}else{if(y.name==="fillText"){if(!m||y["arguments"][1]<l&&y["arguments"][2]<l){I.fillText.apply(I,y["arguments"])}}else{if(y.name==="drawImage"){if(y["arguments"][8]>0&&y["arguments"][7]){if(J&&t.taintTest){if(B.indexOf(y["arguments"][0].src)===-1){E.drawImage(y["arguments"][0],0,0);try{E.getImageData(0,0,1,1)}catch(C){G=b.createElement("canvas");E=G.getContext("2d");continue}B.push(y["arguments"][0].src)}}I.drawImage.apply(I,y["arguments"])}}}}break;default:}}}if(D.clip){I.restore()}}e("html2canvas: Renderer: Canvas renderer done - returning canvas obj");v=t.elements.length;if(v===1){if(typeof t.elements[0]==="object"&&t.elements[0].nodeName!=="BODY"&&m===false){u=g.Util.Bounds(t.elements[0]);w=r.createElement("canvas");w.width=u.width;w.height=u.height;I=w.getContext("2d");I.drawImage(k,u.left,u.top,u.width,u.height,0,0,u.width,u.height);delete k;return w}}else{}return k}function n(J){p(J.zIndex);var H="http://www.w3.org/2000/svg",E=r.createElementNS(H,"svg"),u="http://www.w3.org/1999/xlink",B=r.createElementNS(H,"defs"),D,G,x,C,F,A,v,y={},I,z,w=0;E.setAttribute("version","1.1");E.setAttribute("baseProfile","full");E.setAttribute("viewBox","0 0 "+Math.max(J.ctx.width,t.width)+" "+Math.max(J.ctx.height,t.height));E.setAttribute("width",Math.max(J.ctx.width,t.width)+"px");E.setAttribute("height",Math.max(J.ctx.height,t.height)+"px");E.setAttribute("preserveAspectRatio","none");E.appendChild(B);for(D=0,x=o.length;D<x;D+=1){F=o.splice(0,1)[0];F.canvasPosition=F.canvasPosition||{};if(F.ctx.storage){for(G=0,C=F.ctx.storage.length;G<C;G+=1){A=F.ctx.storage[G];switch(A.type){case"variable":y[A.name]=A["arguments"];break;case"function":if(A.name==="fillRect"){v=r.createElementNS(H,"rect");v.setAttribute("x",A["arguments"][0]);v.setAttribute("y",A["arguments"][1]);v.setAttribute("width",A["arguments"][2]);v.setAttribute("height",A["arguments"][3]);v.setAttribute("fill",y.fillStyle);E.appendChild(v)}else{if(A.name==="fillText"){v=r.createElementNS(H,"text");z=y.font.split(" ");v.style.fontVariant=z.splice(0,1)[0];v.style.fontWeight=z.splice(0,1)[0];v.style.fontStyle=z.splice(0,1)[0];v.style.fontSize=z.splice(0,1)[0];v.setAttribute("x",A["arguments"][1]);v.setAttribute("y",A["arguments"][2]-(parseInt(v.style.fontSize,10)+3));v.setAttribute("fill",y.fillStyle);v.style.dominantBaseline="text-before-edge";v.style.fontFamily=z.join(" ");I=r.createTextNode(A["arguments"][0]);v.appendChild(I);E.appendChild(v)}else{if(A.name==="drawImage"){if(A["arguments"][8]>0&&A["arguments"][7]){v=r.createElementNS(H,"clipPath");v.setAttribute("id","clipId"+w);I=r.createElementNS(H,"rect");I.setAttribute("x",A["arguments"][5]);I.setAttribute("y",A["arguments"][6]);I.setAttribute("width",A["arguments"][3]);I.setAttribute("height",A["arguments"][4]);v.appendChild(I);B.appendChild(v);v=r.createElementNS(H,"image");v.setAttributeNS(u,"xlink:href",A["arguments"][0].src);v.setAttribute("width",A["arguments"][0].width);v.setAttribute("height",A["arguments"][0].height);v.setAttribute("x",A["arguments"][5]-A["arguments"][1]);v.setAttribute("y",A["arguments"][6]-A["arguments"][2]);v.setAttribute("clip-path","url(#clipId"+w+")");v.setAttribute("preserveAspectRatio","none");E.appendChild(v);w+=1}}}}break;default:}}}}e("html2canvas: Renderer: SVG Renderer done - returning SVG DOM obj");return E}switch(t.renderer.toLowerCase()){case"canvas":k=r.createElement("canvas");if(k.getContext){e("html2canvas: Renderer: using canvas renderer");return s(j)}else{m=true;e("html2canvas: Renderer: canvas not available, using flashcanvas");var q=r.createElement("script");q.src=t.flashcanvas;q.onload=(function(u,v){var w;if(u.onload===h){if(u.onreadystatechange!==h){w=function(){if(u.readyState!=="loaded"&&u.readyState!=="complete"){f.setTimeout(w,250)}else{v()}};f.setTimeout(w,250)}else{e("html2canvas: Renderer: Can't track when flashcanvas is loaded")}}else{return v}})(q,function(){if(typeof f.FlashCanvas!=="undefined"){e("html2canvas: Renderer: Flashcanvas initialized");f.FlashCanvas.initElement(k);s(j)}});r.body.appendChild(q);return k}break;case"svg":if(r.createElementNS){e("html2canvas: Renderer: using SVG renderer");return n(j)}break}return this};f.html2canvas=g}(window,document));